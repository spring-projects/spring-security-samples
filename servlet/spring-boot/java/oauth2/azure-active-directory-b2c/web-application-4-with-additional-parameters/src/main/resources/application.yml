# From **Azure AD B2C** portal `App registrations` blade, select **Endpoints**, Access `Azure AD B2C OpenID Connect metadata document`(Global cloud format may looks like
#`https://{your-tenant-name}.b2clogin.com/{your-tenant-name}.onmicrosoft.com/<policy-name>/v2.0/.well-known/openid-configuration`,
# China Cloud looks like `https://{your-tenant-name}.b2clogin.cn/{your-tenant-name}.partner.onmschina.cn/<policy-name>/v2.0/.well-known/openid-configuration`) replace <policy-name> with your sign up or sign in user flow name.
spring:
  security:
    oauth2:
      client:
        provider:
          sign-up-or-sign-in:
            # You can find your authorization-uri from the **Endpoints** with `Azure AD B2C OAuth 2.0 authorization endpoint (v2)` and replace `<policy-name>` with your sign up or sign in user flow
            authorization-uri: ${your-authorization-uri}
            # You can find your `token-uri` from the result page of Azure AD B2C OpenID Connect metadata document
            token-uri: ${your-token-uri}
            # You can find your `jwkSetUri` from the result page of Azure AD B2C OpenID Connect metadata document
            jwk-set-uri: ${your-jwk-set-uri}
          resource-server:
            # Now B2C don't support client_credential, but we can use AAD point to realize this function.
            # From **Azure AD B2C** portal `App registrations` blade, select **Endpoints**, Access `Azure AD OpenID Connect metadata document`(Global cloud format may looks like
            #`https://login.microsoftonline.com/${your-tenant-id}/v2.0/.well-known/openid-configuration`,
            # China Cloud looks like `https://login.chinacloudapi.cn/${your-tenant-id}/v2.0/.well-known/openid-configuration`) replace <policy-name> with your user flow name.
            # You can find your `issuer` from the result page of Azure AD OpenID Connect metadata document
            issuer-uri: https://login.microsoftonline.com/${your-tenant-id}
        registration:
          sign-up-or-sign-in:
            provider: sign-up-or-sign-in
            # Select your instance under `Applications` from portal, and then Fill in `${client-id}` from `Application ID`.
            # To make your accessToken can be validate form resource server, you should use the same application with resource server.
            client-id: ${client-id}
            # Fill in `${your-client-secret}` from one of `Keys`.
            client-secret: ${your-client-secret}
            authorization-grant-type: authorization_code
            redirect-uri: "{baseUrl}/login/oauth2/code/"
            # Fill in `${client-id}` from `Application ID`
            # Fill in `${your-tenant-name}` from your tenant name
            scope: openid, offline_access, https://${your-tenant-name}.onmicrosoft.com/${client-id}/Delegated.Premisson.Scope1
          resource-server:  # This is used to demonstrate client_credentials type. Refs: https://docs.microsoft.com/azure/active-directory/develop/v2-oauth2-client-creds-grant-flow
            provider: resource-server
            # Fill in `${client-id}` from `Application ID`
            # Fill in `${your-tenant-name}` from your tenant name
            scope: https://${your-tenant-name}.onmicrosoft.com/${client-id}/.default
            # Fill in `${client-id}` from `Application ID`
            client-id: ${client-id}
            # Fill in `${your-client-secret}` from one of `Keys`.
            client-secret: ${your-client-secret}
            authorization-grant-type: client_credentials
            redirect-uri: "{baseUrl}/login/oauth2/code/"

# this uri is used to clear your cache when you logout, please fill ${your-tenant-name} with your tenant name
# and fill ${policy-name} with your sign up or sign in user flow name.
logout-success-url: https://${your-tenant-name}.b2clogin.com/${your-tenant-name}.onmicrosoft.com/${policy-name}/oauth2/v2.0/logout?post_logout_redirect_uri=http%3A%2F%2Flocalhost%3A8080%2Flogin
additional-Parameters: '{"prompt": consent, "parameter2": B2C}'
server:
  port: 8083